<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å±±å½¢å±‹ è‚‰ã‚¬ãƒãƒ£</title>

<style>
  body {
    font-family: sans-serif;
    text-align: center;
    background:#fff8f0;
    padding: 40px 16px;
  }
  h1 {
    color: #d84315;
  }
  button {
    margin-top: 40px;
    padding: 18px 32px;
    font-size: 22px;
    background: #ff7043;
    border: none;
    border-radius: 10px;
    color: white;
    cursor: pointer;
  }
  button:disabled {
    background: #ccc;
    cursor: not-allowed;
  }
  #result {
    margin-top: 30px;
    font-size: 24px;
    font-weight: bold;
    color: #6d4c41;
    min-height: 32px;
  }
</style>

</head>
<body>

<h1>å±±å½¢å±‹ è‚‰ã‚¬ãƒãƒ£</h1>
<p>1æ—¥1å›æŒ‘æˆ¦ã§ãã¾ã™!</p>

<button id="drawButton">ã‚¬ãƒãƒ£ã‚’å›ã™</button>
<p id="result"></p>

<script>
const prizes = [
  { name: "ğŸ– æ¥µä¸Šå’Œç‰› 200g", chance: 3 },
  { name: "ğŸ¥ˆ åšåˆ‡ã‚Šä¸Šã‚¿ãƒ³ 150g", chance: 7 },
  { name: "ğŸº ãƒ‰ãƒªãƒ³ã‚¯1æ¯", chance: 20 },
  { name: "ğŸ’´ æ¬¡å›10%OFF", chance: 30 },
  { name: "ğŸ˜„ ã¾ãŸæ˜æ—¥æŒ‘æˆ¦ã—ã¦ã­", chance: 40 }
];

const today = new Date().toISOString().slice(0, 10);
const saved = localStorage.getItem("gachaDate");

const drawButton = document.getElementById("drawButton");
const resultElem = document.getElementById("result");

if (saved === today) {
  drawButton.disabled = true;
  resultElem.innerText = "æœ¬æ—¥ã®æŠ½é¸ã¯çµ‚äº†ã—ã¾ã—ãŸã€‚";
}

drawButton.onclick = () => {
  drawButton.disabled = true;

  // ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆé¢¨ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
  let count = 0;
  const interval = setInterval(() => {
    const randomPrize = prizes[Math.floor(Math.random() * prizes.length)].name;
    resultElem.innerText = "ğŸ² " + randomPrize + " ğŸ²";
    count++;
    if (count > 20) { // ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã®å›æ•°ï¼ˆèª¿æ•´å¯èƒ½ï¼‰
      clearInterval(interval);

      // æœ¬å½“ã®æŠ½é¸
      let rand = Math.random() * 100;
      let sum = 0;
      let prize = "ğŸ˜¢ å¤–ã‚Œ";

      for (let p of prizes) {
        sum += p.chance;
        if (rand < sum) {
          prize = p.name;
          break;
        }
      }

      resultElem.innerText = "ğŸ‰ " + prize + " ğŸ‰";
      localStorage.setItem("gachaDate", today);
    }
  }, 100); // æ–‡å­—ãŒåˆ‡ã‚Šæ›¿ã‚ã‚‹é€Ÿåº¦ï¼ˆãƒŸãƒªç§’ï¼‰
}
</script>

</body>
</html>
